<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  </head>
  <link
    href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
    rel="stylesheet"
  />
  <body>
    <% var test =foods; %>
    <% var total =totalOrders; %>
    <section class="orders section light-section">
      <div class="container max-w-max mx-auto px-3">
        <h1 class="font-bold text-green-700 text-lg mb-4 underline md:text-2xl">Rank List</h1>
        <% if(messages.success) { %>
        <div
          id="success-alert"
          class="flex items-center bg-green-500 text-white text-sm font-bold px-4 py-3"
          role="alert"
        >
          <svg
            class="fill-current w-4 h-4 mr-2"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
          >
            <path
              d="M12.432 0c1.34 0 2.01.912 2.01 1.957 0 1.305-1.164 2.512-2.679 2.512-1.269 0-2.009-.75-1.974-1.99C9.789 1.436 10.67 0 12.432 0zM8.309 20c-1.058 0-1.833-.652-1.093-3.524l1.214-5.092c.211-.814.246-1.141 0-1.141-.317 0-1.689.562-2.502 1.117l-.528-.88c2.572-2.186 5.531-3.467 6.801-3.467 1.057 0 1.233 1.273.705 3.23l-1.391 5.352c-.246.945-.141 1.271.106 1.271.317 0 1.357-.392 2.379-1.207l.6.814C12.098 19.02 9.365 20 8.309 20z"
            />
          </svg>
          <p><%= messages.success %>ğŸ˜Š</p>
        </div>
        <% } %>
    <div class=" container max-w-max mx-auto" id="top_x_div" style="width: 900px; height: 800px;"></div>
  </body>
  <script type="text/javascript">
          var getTest = "<%= test  %>"; 
          var totals= "<%= total  %>";
          let ind1=0
          let ind2=0;
          let ct=0;
          let arr=[]
          let num=[]
          
          while(ind2<getTest.length){
            if(getTest[ind2]===','){
            ct++;
            let result = getTest.substring(ind1, ind2);
            num.push(result)
            ind2++;
            ind1=ind2;
           }
            if(ct==2){
              ct=0;
              arr.push(num);
              num=[]
            }
            ind2++;
          }
          arr.re
     google.charts.load('current', {'packages':['bar']});
    google.charts.setOnLoadCallback(drawStuff);

    function drawStuff() {
     

      var data = new google.visualization.arrayToDataTable(arr);
       var options = {
        title: 'Food Item Sale Count',
        width: 900,
        legend: { position: 'none' },
        chart: { title: 'Food Item Sale Count',
                 subtitle: 'Popularity by count' },
        bars: 'horizontal', // Required for Material Bar Charts.
        axes: {
          x: {
            0: { side: 'top', label: 'Count'} // Top x-axis.
          }
        },
        bar: { groupWidth: "90%" }
      };

      var chart = new google.charts.Bar(document.getElementById('top_x_div'));
      chart.draw(data, options);
    };
  </script>
</html>

